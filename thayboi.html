<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªÜ TH·ªêNG KHUY·∫æT T·∫¨T</title>
    <style>
        /* CSS C∆° b·∫£n */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #e8f4f8; 
            margin: 0;
            flex-direction: column;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
            width: 100%;
            max-width: 650px;
            text-align: center;
        }

        h2 {
            color: #1e3a8a; 
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            text-align: left;
        }

        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #a8c0d1;
            border-radius: 8px;
            box-sizing: border-box; 
        }

        button {
            background-color: #f97316; 
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 25px; 
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background-color 0.3s, transform 0.2s;
        }

        button:hover {
            background-color: #ea580c;
            transform: translateY(-2px);
        }

        /* --- CSS cho M√†n h√¨nh T·∫£i (Animation) --- */
        #loading-screen { display: none; padding: 50px 20px; }
        @keyframes pulse { 0% { opacity: 1; transform: scale(1); } 50% { opacity: 0.7; transform: scale(1.03); } 100% { opacity: 1; transform: scale(1); } }
        #loading-screen h2, #loading-text { animation: pulse 1.5s infinite ease-in-out; color: #1e3aa0; }
        .progress-bar { width: 100%; background-color: #d1e5f0; border-radius: 15px; margin: 20px 0; overflow: hidden; }
        .progress { height: 30px; background-color: #059669; width: 0%; line-height: 30px; color: white; text-align: right; padding-right: 10px; transition: width 0.3s ease-out; font-weight: bold; border-radius: 15px 0 0 15px; }


        /* --- CSS cho Mind Map (S∆° ƒë·ªì t∆∞ duy) --- */
        #result-screen {
            display: none; 
            padding: 20px;
            margin-top: 20px;
            background-color: #f1f8fc;
            border: 2px dashed #93c5fd;
            border-radius: 20px;
            text-align: center;
        }
        
        /* Credit */
        .credits {
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px dashed #ccc;
            font-size: 0.9em;
            color: #555;
            line-height: 1.5;
        }
        .developer {
            font-weight: bold;
            color: #1e3a8a;
        }
        .thank-you {
            font-style: italic;
            color: #f97316;
            font-size: 1.1em;
            margin-top: 5px;
        }

        .mind-map {
            list-style: none;
            padding: 0;
            margin: 0;
            text-align: left;
            position: relative;
        }

        /* Kh·ªëi trung t√¢m (Center Node) */
        .center-node {
            background: #f97316; 
            color: white;
            padding: 18px 30px;
            border-radius: 40px; 
            font-size: 1.3em;
            font-weight: bold;
            display: inline-block;
            box-shadow: 0 6px 15px rgba(249, 115, 22, 0.4);
            margin-bottom: 40px;
            position: relative;
            z-index: 2;
        }

        /* Nh√°nh ch√≠nh (Main Branch) */
        .main-branch {
            list-style: none;
            padding-left: 0;
            position: relative;
            display: flex;
            flex-wrap: wrap; 
            justify-content: space-around;
        }

        .main-branch > li {
            width: 45%; 
            min-width: 250px;
            margin: 10px 0;
            position: relative;
        }

        .main-node {
            display: inline-block;
            background: #059669; 
            color: white;
            padding: 10px 20px;
            border-radius: 30px; 
            font-weight: bold;
            box-shadow: 0 3px 8px rgba(5, 150, 105, 0.3);
            position: relative;
            z-index: 2;
        }

        /* Nh√°nh ph·ª• (Sub Branch - m√¥ ph·ªèng bong b√≥ng/m√¢y) */
        .sub-branch {
            list-style: none;
            padding-left: 10px;
            margin: 15px 0 0 0;
        }
        
        .sub-branch li {
            position: relative;
            padding: 8px 10px;
            margin-bottom: 10px;
            font-size: 0.9em;
            color: #4c1d95;
            background: #e9d5ff; 
            border-radius: 15px; 
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            text-align: left;
            border-left: 4px solid #8b5cf6; 
        }
        
        /* Hi·ªáu ·ª©ng xu·∫•t hi·ªán k·∫øt qu·∫£ */
        @keyframes fadeInScale {
            0% { opacity: 0; transform: translateY(20px) scale(0.9); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }

        .show-result {
            animation: fadeInScale 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards; 
        }

    </style>
</head>
<body>

    <div class="container">
        <div id="input-form">
            <h2>üîé PH√ÇN T√çCH </h2>
            <form id="info-form">
                <label for="name">T√™n c·ªßa b·∫°n:</label>
                <input type="text" id="name" required placeholder="V√≠ d·ª•: T√®o, T√≠t...">

                <label for="age">Tu·ªïi c·ªßa b·∫°n:</label>
                <input type="number" id="age" required min="1" max="150" placeholder="V√≠ d·ª•: 25">

                <label for="height">Chi·ªÅu cao (cm):</label>
                <input type="number" id="height" required min="50" max="250" placeholder="V√≠ d·ª•: 170">
                
                <label for="weight">C√¢n n·∫∑ng (kg):</label>
                <input type="number" id="weight" required min="10" max="500" placeholder="V√≠ d·ª•: 65">

                <button type="submit">PhucLuom b√≥i</button>
            </form>
        </div>

        <div id="loading-screen">
            <h2>ƒê·ª£i h·ªá th·ªëng ƒëang khuy·∫øt t·∫≠t...</h2>
            <p>Vui l√≤ng ch·ªù. H·ªá th·ªëng ƒëang t√¨m ra ƒëi·ªÉm ƒë·ªÉ "ch√™" b·∫°n...</p>
            <div class="progress-bar">
                <div class="progress" id="progress-value">0%</div>
            </div>
            <p id="loading-text">ƒêang ƒë√°nh gi√° m·ª©c ƒë·ªô "thi·∫øu mu·ªëi" c·ªßa t√≠nh c√°ch...</p>
        </div>

        <div id="result-screen">
            <h2 style="color:#f97316;">‚ùå H·ªÜ TH·ªêNG PHUCLUOM B√ìI '-' ‚ùå</h2>
            
            <div id="analysis-result">
                </div>
            <br>
            <button onclick="window.location.reload()">B√≥i again</button>
            
            <div class="credits">
                <p class="thank-you">C·∫£m ∆°n ƒë√£ s·ª≠ d·ª•ng h·ªá th·ªëng PhucLuom b√≥i uy t√≠n n√†y !</p>
                <p>Development & Logic by: <span class="developer">Nguy·ªÖn ƒê·∫°i Ph√∫c</span></p>
            </div>
        </div>
    </div>

    <script>
        const form = document.getElementById('info-form');
        const inputForm = document.getElementById('input-form');
        const loadingScreen = document.getElementById('loading-screen');
        const resultScreen = document.getElementById('result-screen');
        const progressValue = document.getElementById('progress-value');
        const analysisResult = document.getElementById('analysis-result');
        const loadingText = document.getElementById('loading-text');

        // --- C√ÅC M·∫¢NG C√ÇU CH√ä C∆Ø·ªúI NG·∫™U NHI√äN ---

        const appearanceVariations = {
            // Qu√° g·∫ßy (BMI < 18)
            tooThin: [
                "B·∫°n ƒÉn g√¨ m√† nh·∫π nh∆∞ m·ªôt l·ªùi h·ª©a v·∫≠y? Nh·ªõ bu·ªôc d√¢y gi√†y c·∫©n th·∫≠n k·∫ªo gi√≥ th·ªïi bay ƒë·∫•y.",
                "BMI b√°o ƒë·ªông: C∆° th·ªÉ b·∫°n m·ªèng manh ƒë·∫øn m·ª©c c·∫ßn gi·∫•y ph√©p x√¢y d·ª±ng ƒë·ªÉ ƒë·ª©ng th·∫≥ng.",
                "T·ª∑ l·ªá c∆° th·ªÉ: B·∫°n thu·ªôc team 'm·∫∑c √°o r·ªông ƒë·ªÉ che gi·∫•u s·ª± t·ªìn t·∫°i'."
            ],
            // Qu√° c√¢n (BMI > 26)
            tooHeavy: [
                "H·ªá th·ªëng ph√°t hi·ªán b·∫°n mang theo 't√¨nh y√™u' qu√° l·ªõn trong c∆° th·ªÉ. Nh·ªõ lƒÉn ƒëi ch·ª© ƒë·ª´ng c·ªë ƒëi b·ªô nh√©. D·ªÖ l√†m rung chuy·ªÉn ƒë·ªãa c·∫ßu l·∫Øm!",
                "B·∫°n ƒë·∫°t ƒë·∫øn c·∫£nh gi·ªõi 'kh√¥ng c·∫ßn g·ªëi' v√¨ c∆° th·ªÉ ƒë√£ t·ª± c√≥ ƒë·ªám.",
                "S·ªë li·ªáu n√†y cho th·∫•y b·∫°n ƒë√£ th·∫Øng cu·ªôc thi 'ai ƒÉn nhi·ªÅu k·∫πo nh·∫•t' nƒÉm v·ª´a qua."
            ],
            // B√¨nh th∆∞·ªùng (18 <= BMI <= 26)
            normalWeight: [
                "Ch·ªâ s·ªë BMI ho√†n h·∫£o... cho m·ªôt ng∆∞·ªùi m·∫´u ƒë·ªì ƒÉn v·∫∑t. S·∫Ω c√≥ ng√†y b·∫°n c·∫ßn d√πng d√¢y an to√†n khi ƒë·ª©ng.",
                "Qu√° b√¨nh th∆∞·ªùng, kh√¥ng c√≥ g√¨ ƒë·ªÉ ch√™ bai. Th√¥i th√¨... c·ªë g·∫Øng ·ªü ki·∫øp sau nh√©!",
                "C√¢n n·∫∑ng c√¢n ƒë·ªëi... nh∆∞ng c√≥ v·∫ª nh∆∞ b·∫°n ƒëang c·ªë gi·∫•u m·ªôt t√∫i khoai t√¢y chi√™n d∆∞·ªõi √°o."
            ],
            // Qu√° th·∫•p (< 155 cm)
            tooShort: [
                "H·ªá th·ªëng ph·∫£i d√πng k√≠nh l√∫p ƒë·ªÉ t√¨m th√¥ng s·ªë n√†y. Kh·∫£ nƒÉng cao l√† b·∫°n v√† n·∫•m l√πn c√≥ m·ªëi quan h·ªá h·ªç h√†ng.",
                "ƒê·ª´ng che ch·∫Øn t·∫ßm nh√¨n c·ªßa ng∆∞·ªùi kh√°c nh√©! B·∫°n c·∫ßn m·ªôt gi·∫•y ph√©p ƒë·ªÉ leo l√™n gh·∫ø l·∫•y ƒë·ªì.",
                "Gi·ªëng nh∆∞ m·ªôt phi√™n b·∫£n thu nh·ªè: ti·ªán l·ª£i nh∆∞ng thi·∫øu t·∫ßm nh√¨n."
            ],
            // Qu√° cao (> 185 cm)
            tooTall: [
                "R·∫•t ·∫•n t∆∞·ª£ng. B·∫°n ch·∫Øc ch·∫Øn ph·∫£i c·∫©n th·∫≠n khi ƒëi qua c·ª≠a ra v√†o. ƒê·ª´ng qu√™n xin l·ªói ƒë√°m m√¢y v√¨ b·∫°n ƒë√£ l√†m n√≥ ƒëau.",
                "B·∫°n c√≥ th·ªÉ ƒë∆∞·ª£c d√πng l√†m c·ªôt thu s√≥ng di ƒë·ªông trong tr∆∞·ªùng h·ª£p kh·∫©n c·∫•p.",
                "T·∫ßm nh√¨n c·ªßa b·∫°n th·∫≠t r·ªông l·ªõn, nh∆∞ng ƒë·ª´ng nh√¨n xu·ªëng qu√° nhi·ªÅu, k·∫ªo ƒëau c·ªï."
            ],
            // Chi·ªÅu cao trung b√¨nh
            normalHeight: [
                "Chi·ªÅu cao qu√° 'b√¨nh th∆∞·ªùng', kh√¥ng c√≥ g√¨ ƒë·ªÉ ch√¢m bi·∫øm c·∫£. Th√¥i th√¨... c·ªë g·∫Øng ·ªü ki·∫øp sau nh√©!",
                "Ch·ªâ s·ªë chi·ªÅu cao an to√†n. C√≥ l·∫Ω b·∫°n c·∫ßn m·ªôt chi·∫øc thang m√°y c√° nh√¢n ƒë·ªÉ n·ªïi b·∫≠t."
            ],
            // ƒêi·ªÉm nh·∫•n ng·∫´u nhi√™n
            focus: [
                "Khu√¥n m·∫∑t: H·ªá th·ªëng nh·∫≠n di·ªán s·ª± 'thi·∫øu ng·ªß' kinh ni√™n.",
                "M√†u da: S·∫Øc ƒë·ªô 'h∆°i thi·∫øu √°nh n·∫Øng m·∫∑t tr·ªùi nghi√™m tr·ªçng'.",
                "Trang ph·ª•c: C√≥ v·∫ª l√† ƒëi·ªÉm c·ªông duy nh·∫•t.",
                "M√°i t√≥c: C√≥ v·∫ª nh∆∞ v·ª´a tr·∫£i qua m·ªôt tr·∫≠n chi·∫øn v·ªõi m√°y s·∫•y.",
                "ƒê√¥i m·∫Øt: Long lanh... nh∆∞ s·∫Øp ph·∫£i tr·∫£ n·ª£."
            ]
        };

        // Bi·∫øn th·ªÉ cho T√≠nh c√°ch
        const personalityComments = {
            branches: [
                {
                    main: "ƒê·ªô H√†i H∆∞·ªõc & Ki√™n Nh·∫´n",
                    subs: [
                        "C·∫ßn ph·∫£i gi·∫£i th√≠ch sau m·ªói c√¢u chuy·ªán c∆∞·ªùi. (Ghi ch√∫: L·ªói kh√¥ng ph·∫£i do ng∆∞·ªùi nghe).",
                        "Ch·ªâ s·ªë ki√™n nh·∫´n c·ª±c k·ª≥ cao... cho vi·ªác xem qu·∫£ng c√°o YouTube.",
                        "Ch·ªâ gi·ªèi 'c√† kh·ªãa' trong ƒë·∫ßu, n√≥i ra l√† tr·∫≠t l·∫•t."
                    ]
                },
                {
                    main: "L·ªëi S·ªëng & Th√≥i Quen",
                    subs: [
                        "H∆∞·ªõng ngo·∫°i v·ªÅ ph√≠a t·ªß l·∫°nh. H∆∞·ªõng n·ªôi v·ªÅ ph√≠a gi∆∞·ªùng ng·ªß.",
                        "ƒê·ªô t·∫≠p trung: T∆∞∆°ng ƒë∆∞∆°ng v·ªõi vi·ªác c·ªë g·∫Øng nh·ªõ m·∫≠t kh·∫©u sau khi ƒë·ªïi 5 ph√∫t tr∆∞·ªõc.",
                        "M·ª©c ƒë·ªô l∆∞·ªùi bi·∫øng c√≥ h·ªá th·ªëng. 'Ch·ªù mai l√†m' l√† kh·∫©u hi·ªáu."
                    ]
                },
                {
                    main: "X√£ Giao & C√° T√≠nh",
                    subs: [
                        "D·ªÖ th∆∞∆°ng. Nh∆∞ng d·ªÖ th∆∞∆°ng ·ªü ƒë√¢y l√† d·ªÖ b·ªã... l·∫°c ƒë∆∞·ªùng.",
                        "R·∫•t gi·ªèi l·∫Øng nghe, nh·∫•t l√† khi c√¢u chuy·ªán li√™n quan ƒë·∫øn ch√≠nh b·∫°n. (Thao t√∫ng t√¢m l√Ω c·∫•p ƒë·ªô 0).",
                        "Ch·∫Øc ch·∫Øn l√† ƒëa nh√¢n c√°ch... ho·∫∑c ch·ªâ ƒë∆°n gi·∫£n l√† ƒë√£ng tr√≠."
                    ]
                }
            ]
        };

        // M√¥ t·∫£ c√°c b∆∞·ªõc t·∫£i...
        const loadSteps = [
            "ƒêang t√¨m ki·∫øm d·ªØ li·ªáu h√†i h∆∞·ªõc tr√™n server...", "ƒêang so s√°nh v·ªõi c√°c ng√¥i sao h·∫°ng A (ƒë·ªÉ th·∫•y s·ª± kh√°c bi·ªát)...",
            "ƒêang t√≠nh to√°n ch·ªâ s·ªë 't·ª± tin' gi·∫£ l·∫≠p...", "ƒê√£ t√¨m th·∫•y ƒëi·ªÉm y·∫øu. ƒêang ph√≥ng ƒë·∫°i...",
            "S·∫Øp ho√†n th√†nh qu√° tr√¨nh 's·ªâ v·ªâa' th√¢n thi·ªán...", "ƒêang t·∫°o ra c√¢u ch√™ c∆∞·ªùi ƒë·ªôc nh·∫•t v√¥ nh·ªã...",
            "Ph√¢n t√≠ch xem t√≠nh c√°ch c√≥ 'l·∫°c qu·∫ª' v·ªõi ngo·∫°i h√¨nh kh√¥ng..."
        ];

        const getRandomComment = (array) => array[Math.floor(Math.random() * array.length)];


        // --- Event Listeners v√† H√†m Ch√≠nh ---

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value;
            const age = parseInt(document.getElementById('age').value);
            const height = parseInt(document.getElementById('height').value);
            const weight = parseInt(document.getElementById('weight').value);

            inputForm.style.display = 'none';
            loadingScreen.style.display = 'block';

            startLoading(name, age, height, weight);
        });

        function startLoading(name, age, height, weight) {
            let progress = 0;
            let stepIndex = 0;
            const interval = setInterval(() => {
                progress += Math.floor(Math.random() * 4) + 1;
                if (progress > 100) progress = 100;

                progressValue.style.width = progress + '%';
                progressValue.textContent = progress + '%';

                if (progress > stepIndex * (100 / loadSteps.length) && stepIndex < loadSteps.length) {
                    loadingText.textContent = loadSteps[stepIndex];
                    stepIndex++;
                }

                if (progress === 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        showResults(name, age, height, weight);
                    }, 1000);
                }
            }, 100);
        }

        // --- H√†m T·∫°o Mind Map ---
        function createMindMapHTML(name, age, height, weight) {
            let html = `<div class="center-node">üéØ ${name.toUpperCase()} (${age} tu·ªïi)</div>`;
            html += `<ul class="main-branch">`;

            // 1. NH√ÅNH NGO·∫†I H√åNH
            html += `
                <li>
                    <span class="main-node">Ngo·∫°i H√¨nh</span>
                    <ul class="sub-branch">
                        ${getAppearanceBranches(height, weight)}
                    </ul>
                </li>
            `;

            // 2. NH√ÅNH T√çNH C√ÅCH
            html += `
                <li>
                    <span class="main-node">T√≠nh C√°ch</span>
                    <ul class="sub-branch">
                        ${getPersonalityBranches(age)}
                    </ul>
                </li>
            `;

            html += `</ul>`;
            return html;
        }


        function getAppearanceBranches(height, weight) {
            let subsHTML = '';
            
            // 1. Nh√°nh Chi·ªÅu Cao (Ng·∫´u nhi√™n)
            let heightComment;
            if (height < 155) {
                heightComment = getRandomComment(appearanceVariations.tooShort);
            } else if (height > 185) {
                heightComment = getRandomComment(appearanceVariations.tooTall);
            } else {
                heightComment = getRandomComment(appearanceVariations.normalHeight);
            }
            subsHTML += `<li>Chi·ªÅu Cao (${height}cm): ${heightComment}</li>`;

            // 2. Nh√°nh C√¢n N·∫∑ng/BMI (Ng·∫´u nhi√™n)
            const humorBMI = (weight / ((height / 100) * (height / 100))).toFixed(1);
            let weightComment;
            if (humorBMI < 18) {
                weightComment = getRandomComment(appearanceVariations.tooThin);
            } else if (humorBMI > 26) {
                weightComment = getRandomComment(appearanceVariations.tooHeavy);
            } else {
                weightComment = getRandomComment(appearanceVariations.normalWeight);
            }
            subsHTML += `<li>C√¢n N·∫∑ng (BMI ${humorBMI}): ${weightComment}</li>`;

            // 3. Nh√°nh ƒêi·ªÉm Nh·∫•n Ng·∫´u nhi√™n
            const randomFocusComment = getRandomComment(appearanceVariations.focus);
            subsHTML += `<li>ƒêi·ªÉm Nh·∫•n ƒê·∫∑c Bi·ªát: ${randomFocusComment}</li>`;

            return subsHTML;
        }
        
        function getPersonalityBranches(age) {
            let subsHTML = '';
            
            // Nh√°nh Chung Ng·∫´u nhi√™n (3 nh√°nh, m·ªói nh√°nh ch·ªçn ng·∫´u nhi√™n 1 c√¢u)
            personalityComments.branches.forEach(branch => {
                const randomSub = branch.subs[Math.floor(Math.random() * branch.subs.length)];
                subsHTML += `<li>${randomSub}</li>`;
            });

            // Nh√°nh theo Tu·ªïi 
            let ageComment;
            if (age < 18) {
                ageComment = `ƒêang trong giai ƒëo·∫°n 'kh√≥ ·ªü' nh·∫•t. M·ª©c ƒë·ªô m√¢u thu·∫´n n·ªôi t√¢m v·ªÅ vi·ªác ch·ªçn m·∫∑c g√¨ h√¥m nay c·ª±c cao.`;
            } else if (age >= 18 && age < 30) {
                ageComment = `Giai ƒëo·∫°n 'm∆° m·ªông h√£o huy·ªÅn v√† thi·∫øu ti·ªÅn'. R·∫•t nƒÉng ƒë·ªông... tr√™n m·∫°ng x√£ h·ªôi.`;
            } else if (age >= 30) {
                ageComment = `ƒê√£ ƒë·∫°t ƒë·∫øn c·∫£nh gi·ªõi 'ng·ªß s·ªõm l√† m·ªôt th√†nh t·ª±u'. L∆∞·ªùi bi·∫øng m·ªôt c√°ch c√≥ h·ªá th·ªëng.`;
            }
            subsHTML += `<li>ƒê√°nh Gi√° Theo Tu·ªïi (${age}): ${ageComment}</li>`;

            return subsHTML;
        }
        
        function showResults(name, age, height, weight) {
            loadingScreen.style.display = 'none';
            resultScreen.style.display = 'block';
            resultScreen.classList.add('show-result'); 

            const mapHTML = createMindMapHTML(name, age, height, weight);

            analysisResult.innerHTML = mapHTML;
        }

    </script>

</body>
</html>